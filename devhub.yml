version: v2
navigator: Douglas Yau
name: kayako_classic
email: douglas.yau@crossover.com
repo:
  companyName: Think3
  productName: KAYAKOC
  repoUrl: https://github.com/trilogy-group/kayako-SWIFT
  branch: single_repo
  repoType: Distributable artifacts
  githubTokenSecretId: doug-git
buildDeps:
  - repo:
build:
  techStack: dougyau/php7:latest
  buildOs: Debian 9
  runtimeVersion: php 7.2
  buildTool:
  preBuild:
  buildCommand:
unitTest:
  utFramework: PHPUnit
  preTest: |
    bash "${WORKSPACE}/jenkins/setup_environment.sh"
    mysql -e 'create database if not exists swift'
    cd trunk
    composer --no-progress install
    cd setup
    php console.setup.php Trilogy http%3A%2F%2Flocalhost%2Findex.php%3F Kayako Admin admin QAtesting123 root%40localhost
  testCommand: |
    cd trunk
    php -d memory_limit=-1 bin/phpunit --no-coverage -c tests/phpunit.jenkins.xml
integration test:
  integrationTestFramework: NA
  preIntegrationTest:
  integrationTestCommand:
package:
  packageTool: composer
  packageCommand: |
    php scripts/package.php
  artifactDir: scripts/files
deployDeps:
deploy:
  serviceName: Kayako-Swift
  deploymentCheck: ProductionHealthCheck
  stickySessions: False
  canUseLb: False
  stablePersistence: False
  fixedNetworkIdentifier: False
  deployCommand:
storage:
ports:
envVars:
run:
dockerized:
